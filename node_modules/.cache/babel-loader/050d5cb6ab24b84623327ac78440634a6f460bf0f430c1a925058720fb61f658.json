{"ast":null,"code":"var _jsxFileName = \"/Users/lukasygina/image-share-app-1/client/src/components/ChatPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Box, Typography, TextField, IconButton, Avatar, Paper, Divider } from '@mui/material';\nimport { Send, Close } from '@mui/icons-material';\nimport { useProject } from '../context/ProjectContext';\nimport api from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPanel = ({\n  onClose\n}) => {\n  _s();\n  const {\n    currentProject,\n    socket\n  } = useProject();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    const chatId = getChatId();\n    if (chatId) {\n      loadMessages(chatId);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentProject]);\n  useEffect(() => {\n    const chatId = getChatId();\n    if (!socket || !chatId) return;\n\n    // Join chat room\n    socket.emit('join', chatId);\n\n    // Listen for new messages\n    const handleNewMessage = message => {\n      setMessages(prev => [...prev, message]);\n      scrollToBottom();\n    };\n    socket.on('new_message', handleNewMessage);\n    return () => {\n      socket.off('new_message', handleNewMessage);\n      if (chatId) {\n        socket.emit('leave', chatId);\n      }\n    };\n  }, [socket, currentProject]);\n  const getChatId = () => {\n    if (!(currentProject !== null && currentProject !== void 0 && currentProject.chat)) return null;\n    // Handle both populated object and ID string\n    return typeof currentProject.chat === 'object' ? currentProject.chat._id : currentProject.chat;\n  };\n  const loadMessages = async chatId => {\n    try {\n      const response = await api.get(`/chats/${chatId}`);\n      setMessages(response.data.messages || []);\n      setTimeout(scrollToBottom, 100);\n    } catch (error) {\n      console.error('Failed to load messages:', error);\n    }\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    try {\n      const response = await api.post(`/chats/${currentProject.chat}/messages`, {\n        content: newMessage,\n        type: 'text'\n      });\n      setMessages(prev => [...prev, response.data]);\n      setNewMessage('');\n      scrollToBottom();\n\n      // Emit to socket for real-time\n      if (socket) {\n        socket.emit('send_message', response.data);\n      }\n    } catch (error) {\n      console.error('Failed to send message:', error);\n    }\n  };\n  const formatTime = date => {\n    return new Date(date).toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      width: 300,\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      bgcolor: '#252526',\n      borderLeft: '1px solid #2d2d2d'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 1.5,\n        borderBottom: '1px solid #2d2d2d',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        sx: {\n          color: '#9e9e9e',\n          fontWeight: 500\n        },\n        children: \"TEAM CHAT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        size: \"small\",\n        onClick: onClose,\n        sx: {\n          color: '#9e9e9e'\n        },\n        children: /*#__PURE__*/_jsxDEV(Close, {\n          fontSize: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flexGrow: 1,\n        overflowY: 'auto',\n        p: 2,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 1.5\n      },\n      children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: 'center',\n          mt: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            color: '#666'\n          },\n          children: \"No messages yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          sx: {\n            color: '#666'\n          },\n          children: \"Start chatting with your team!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this) : messages.map((msg, index) => {\n        var _msg$sender, _msg$sender$username, _msg$sender$username$, _msg$sender2;\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            sx: {\n              width: 32,\n              height: 32,\n              bgcolor: '#1976d2',\n              fontSize: 14\n            },\n            children: ((_msg$sender = msg.sender) === null || _msg$sender === void 0 ? void 0 : (_msg$sender$username = _msg$sender.username) === null || _msg$sender$username === void 0 ? void 0 : (_msg$sender$username$ = _msg$sender$username[0]) === null || _msg$sender$username$ === void 0 ? void 0 : _msg$sender$username$.toUpperCase()) || 'U'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              flexGrow: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'baseline',\n                gap: 1,\n                mb: 0.5\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  color: '#fff',\n                  fontWeight: 500,\n                  fontSize: 13\n                },\n                children: ((_msg$sender2 = msg.sender) === null || _msg$sender2 === void 0 ? void 0 : _msg$sender2.username) || 'Unknown'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                sx: {\n                  color: '#666',\n                  fontSize: 11\n                },\n                children: formatTime(msg.createdAt)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Paper, {\n              sx: {\n                p: 1,\n                bgcolor: '#1e1e1e',\n                border: '1px solid #333',\n                borderRadius: 1\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  color: '#ccc',\n                  fontSize: 13,\n                  wordBreak: 'break-word',\n                  whiteSpace: 'pre-wrap'\n                },\n                children: msg.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)]\n        }, msg._id || index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      onSubmit: handleSendMessage,\n      sx: {\n        p: 1.5,\n        borderTop: '1px solid #2d2d2d',\n        bgcolor: '#1e1e1e'\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          size: \"small\",\n          placeholder: \"Type a message...\",\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          sx: {\n            '& .MuiOutlinedInput-root': {\n              color: '#fff',\n              bgcolor: '#252526',\n              fontSize: 13,\n              '& fieldset': {\n                borderColor: '#2d2d2d'\n              },\n              '&:hover fieldset': {\n                borderColor: '#1976d2'\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: '#1976d2'\n              }\n            },\n            '& .MuiInputBase-input::placeholder': {\n              color: '#666',\n              opacity: 1\n            }\n          },\n          onKeyPress: e => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              handleSendMessage(e);\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          type: \"submit\",\n          sx: {\n            bgcolor: '#1976d2',\n            color: '#fff',\n            '&:hover': {\n              bgcolor: '#1565c0'\n            },\n            '&:disabled': {\n              bgcolor: '#333',\n              color: '#666'\n            }\n          },\n          disabled: !newMessage.trim(),\n          children: /*#__PURE__*/_jsxDEV(Send, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPanel, \"HJKecw74ZhzMHpabySfKUVsMqDQ=\", false, function () {\n  return [useProject];\n});\n_c = ChatPanel;\nexport default ChatPanel;\nvar _c;\n$RefreshReg$(_c, \"ChatPanel\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Typography","TextField","IconButton","Avatar","Paper","Divider","Send","Close","useProject","api","jsxDEV","_jsxDEV","ChatPanel","onClose","_s","currentProject","socket","messages","setMessages","newMessage","setNewMessage","messagesEndRef","chatId","getChatId","loadMessages","emit","handleNewMessage","message","prev","scrollToBottom","on","off","chat","_id","response","get","data","setTimeout","error","console","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","e","preventDefault","trim","post","content","type","formatTime","date","Date","toLocaleTimeString","hour","minute","sx","width","height","display","flexDirection","bgcolor","borderLeft","children","p","borderBottom","alignItems","justifyContent","variant","color","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","size","onClick","fontSize","flexGrow","overflowY","gap","length","textAlign","mt","map","msg","index","_msg$sender","_msg$sender$username","_msg$sender$username$","_msg$sender2","sender","username","toUpperCase","mb","createdAt","border","borderRadius","wordBreak","whiteSpace","ref","component","onSubmit","borderTop","fullWidth","placeholder","value","onChange","target","borderColor","opacity","onKeyPress","key","shiftKey","disabled","_c","$RefreshReg$"],"sources":["/Users/lukasygina/image-share-app-1/client/src/components/ChatPanel.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  Box,\n  Typography,\n  TextField,\n  IconButton,\n  Avatar,\n  Paper,\n  Divider\n} from '@mui/material';\nimport { Send, Close } from '@mui/icons-material';\nimport { useProject } from '../context/ProjectContext';\nimport api from '../utils/api';\n\nconst ChatPanel = ({ onClose }) => {\n  const { currentProject, socket } = useProject();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    const chatId = getChatId();\n    if (chatId) {\n      loadMessages(chatId);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentProject]);\n\n  useEffect(() => {\n    const chatId = getChatId();\n    if (!socket || !chatId) return;\n\n    // Join chat room\n    socket.emit('join', chatId);\n\n    // Listen for new messages\n    const handleNewMessage = (message) => {\n      setMessages(prev => [...prev, message]);\n      scrollToBottom();\n    };\n\n    socket.on('new_message', handleNewMessage);\n\n    return () => {\n      socket.off('new_message', handleNewMessage);\n      if (chatId) {\n        socket.emit('leave', chatId);\n      }\n    };\n  }, [socket, currentProject]);\n\n  const getChatId = () => {\n    if (!currentProject?.chat) return null;\n    // Handle both populated object and ID string\n    return typeof currentProject.chat === 'object' ? currentProject.chat._id : currentProject.chat;\n  };\n\n  const loadMessages = async (chatId) => {\n    try {\n      const response = await api.get(`/chats/${chatId}`);\n      setMessages(response.data.messages || []);\n      setTimeout(scrollToBottom, 100);\n    } catch (error) {\n      console.error('Failed to load messages:', error);\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n\n    try {\n      const response = await api.post(`/chats/${currentProject.chat}/messages`, {\n        content: newMessage,\n        type: 'text'\n      });\n\n      setMessages(prev => [...prev, response.data]);\n      setNewMessage('');\n      scrollToBottom();\n\n      // Emit to socket for real-time\n      if (socket) {\n        socket.emit('send_message', response.data);\n      }\n    } catch (error) {\n      console.error('Failed to send message:', error);\n    }\n  };\n\n  const formatTime = (date) => {\n    return new Date(date).toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <Box\n      sx={{\n        width: 300,\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        bgcolor: '#252526',\n        borderLeft: '1px solid #2d2d2d'\n      }}\n    >\n      {/* Header */}\n      <Box\n        sx={{\n          p: 1.5,\n          borderBottom: '1px solid #2d2d2d',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between'\n        }}\n      >\n        <Typography variant=\"subtitle2\" sx={{ color: '#9e9e9e', fontWeight: 500 }}>\n          TEAM CHAT\n        </Typography>\n        <IconButton size=\"small\" onClick={onClose} sx={{ color: '#9e9e9e' }}>\n          <Close fontSize=\"small\" />\n        </IconButton>\n      </Box>\n\n      {/* Messages */}\n      <Box\n        sx={{\n          flexGrow: 1,\n          overflowY: 'auto',\n          p: 2,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 1.5\n        }}\n      >\n        {messages.length === 0 ? (\n          <Box sx={{ textAlign: 'center', mt: 4 }}>\n            <Typography variant=\"body2\" sx={{ color: '#666' }}>\n              No messages yet\n            </Typography>\n            <Typography variant=\"caption\" sx={{ color: '#666' }}>\n              Start chatting with your team!\n            </Typography>\n          </Box>\n        ) : (\n          messages.map((msg, index) => (\n            <Box key={msg._id || index} sx={{ display: 'flex', gap: 1 }}>\n              <Avatar\n                sx={{\n                  width: 32,\n                  height: 32,\n                  bgcolor: '#1976d2',\n                  fontSize: 14\n                }}\n              >\n                {msg.sender?.username?.[0]?.toUpperCase() || 'U'}\n              </Avatar>\n              <Box sx={{ flexGrow: 1 }}>\n                <Box sx={{ display: 'flex', alignItems: 'baseline', gap: 1, mb: 0.5 }}>\n                  <Typography\n                    variant=\"body2\"\n                    sx={{ color: '#fff', fontWeight: 500, fontSize: 13 }}\n                  >\n                    {msg.sender?.username || 'Unknown'}\n                  </Typography>\n                  <Typography variant=\"caption\" sx={{ color: '#666', fontSize: 11 }}>\n                    {formatTime(msg.createdAt)}\n                  </Typography>\n                </Box>\n                <Paper\n                  sx={{\n                    p: 1,\n                    bgcolor: '#1e1e1e',\n                    border: '1px solid #333',\n                    borderRadius: 1\n                  }}\n                >\n                  <Typography\n                    variant=\"body2\"\n                    sx={{\n                      color: '#ccc',\n                      fontSize: 13,\n                      wordBreak: 'break-word',\n                      whiteSpace: 'pre-wrap'\n                    }}\n                  >\n                    {msg.content}\n                  </Typography>\n                </Paper>\n              </Box>\n            </Box>\n          ))\n        )}\n        <div ref={messagesEndRef} />\n      </Box>\n\n      {/* Input */}\n      <Box\n        component=\"form\"\n        onSubmit={handleSendMessage}\n        sx={{\n          p: 1.5,\n          borderTop: '1px solid #2d2d2d',\n          bgcolor: '#1e1e1e'\n        }}\n      >\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          <TextField\n            fullWidth\n            size=\"small\"\n            placeholder=\"Type a message...\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n            sx={{\n              '& .MuiOutlinedInput-root': {\n                color: '#fff',\n                bgcolor: '#252526',\n                fontSize: 13,\n                '& fieldset': {\n                  borderColor: '#2d2d2d'\n                },\n                '&:hover fieldset': {\n                  borderColor: '#1976d2'\n                },\n                '&.Mui-focused fieldset': {\n                  borderColor: '#1976d2'\n                }\n              },\n              '& .MuiInputBase-input::placeholder': {\n                color: '#666',\n                opacity: 1\n              }\n            }}\n            onKeyPress={(e) => {\n              if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                handleSendMessage(e);\n              }\n            }}\n          />\n          <IconButton\n            type=\"submit\"\n            sx={{\n              bgcolor: '#1976d2',\n              color: '#fff',\n              '&:hover': {\n                bgcolor: '#1565c0'\n              },\n              '&:disabled': {\n                bgcolor: '#333',\n                color: '#666'\n              }\n            }}\n            disabled={!newMessage.trim()}\n          >\n            <Send fontSize=\"small\" />\n          </IconButton>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default ChatPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}