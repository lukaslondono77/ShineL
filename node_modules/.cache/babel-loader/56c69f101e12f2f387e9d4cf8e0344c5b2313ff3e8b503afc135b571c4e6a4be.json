{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Grid,Card,CardMedia,CardContent,Typography,Button,Box,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,useMediaQuery,useTheme,Fab}from'@mui/material';import{Delete as DeleteIcon,Add as AddIcon}from'@mui/icons-material';import axios from'axios';import{useAuth}from'../context/AuthContext';import{getFileUrl}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Home=()=>{const[images,setImages]=useState([]);const[selectedImage,setSelectedImage]=useState(null);const{user}=useAuth();const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('md'));useEffect(()=>{fetchImages();},[]);const fetchImages=async()=>{try{const res=await axios.get('/api/images');setImages(res.data);}catch(error){console.error('Error fetching images:',error);}};const handleFileUpload=async event=>{const file=event.target.files[0];if(!file)return;const formData=new FormData();formData.append('image',file);try{await axios.post('/api/images',formData,{headers:{'Content-Type':'multipart/form-data'}});fetchImages();}catch(error){console.error('Error uploading image:',error);}};const handleDelete=async imageId=>{try{await axios.delete(\"/api/images/\".concat(imageId));fetchImages();}catch(error){console.error('Error deleting image:',error);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:isMobile?2:4,mb:isMobile?8:4,px:isMobile?1:3},children:[!isMobile&&/*#__PURE__*/_jsx(Box,{sx:{mb:4,display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Button,{variant:\"contained\",component:\"label\",size:\"large\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:[\"Upload Image\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\"image/*\",onChange:handleFileUpload})]})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:isMobile?1:3,children:images.map(image=>/*#__PURE__*/_jsx(Grid,{item:true,xs:6,sm:4,md:3,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',borderRadius:isMobile?2:1,'&:hover':{transform:'translateY(-2px)',transition:'transform 0.2s ease-in-out',boxShadow:3}},children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:isMobile?\"140\":\"200\",image:getFileUrl(\"/uploads/\".concat(image.filename)),alt:image.originalName,onClick:()=>setSelectedImage(image),sx:{cursor:'pointer',objectFit:'cover'}}),/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1,p:isMobile?1:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{fontSize:isMobile?'0.75rem':'0.875rem',mb:1},children:[\"Uploaded by: \",image.uploadedBy.username]}),user._id===image.uploadedBy._id&&/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleDelete(image._id),size:isMobile?\"small\":\"medium\",sx:{float:'right',color:'error.main','&:hover':{bgcolor:'error.light'}},children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})]})},image._id))}),isMobile&&/*#__PURE__*/_jsxs(Fab,{color:\"primary\",\"aria-label\":\"upload image\",component:\"label\",sx:{position:'fixed',bottom:16,right:16,zIndex:1000},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\"image/*\",onChange:handleFileUpload}),/*#__PURE__*/_jsx(AddIcon,{})]}),/*#__PURE__*/_jsx(Dialog,{open:Boolean(selectedImage),onClose:()=>setSelectedImage(null),maxWidth:\"md\",fullWidth:true,fullScreen:isMobile,children:selectedImage&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogTitle,{children:selectedImage.originalName}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(\"img\",{src:getFileUrl(\"/uploads/\".concat(selectedImage.filename)),alt:selectedImage.originalName,style:{width:'100%',height:'auto',borderRadius:isMobile?0:4}})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setSelectedImage(null),size:isMobile?\"large\":\"medium\",children:\"Close\"})})]})})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Container","Grid","Card","CardMedia","CardContent","Typography","Button","Box","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","useMediaQuery","useTheme","Fab","Delete","DeleteIcon","Add","AddIcon","axios","useAuth","getFileUrl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","images","setImages","selectedImage","setSelectedImage","user","theme","isMobile","breakpoints","down","fetchImages","res","get","data","error","console","handleFileUpload","event","file","target","files","formData","FormData","append","post","headers","handleDelete","imageId","delete","concat","maxWidth","sx","mt","mb","px","children","display","justifyContent","variant","component","size","startIcon","type","hidden","accept","onChange","container","spacing","map","image","item","xs","sm","md","height","flexDirection","borderRadius","transform","transition","boxShadow","filename","alt","originalName","onClick","cursor","objectFit","flexGrow","p","color","fontSize","uploadedBy","username","_id","float","bgcolor","position","bottom","right","zIndex","open","Boolean","onClose","fullWidth","fullScreen","src","style","width"],"sources":["/Users/lukasygina/Desktop/CC201/labs/chat-app-only/client/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Grid,\n  Card,\n  CardMedia,\n  CardContent,\n  Typography,\n  Button,\n  Box,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  useMediaQuery,\n  useTheme,\n  Fab\n} from '@mui/material';\nimport { Delete as DeleteIcon, Add as AddIcon } from '@mui/icons-material';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\nimport { getFileUrl } from '../utils/api';\n\nconst Home = () => {\n  const [images, setImages] = useState([]);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const { user } = useAuth();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  useEffect(() => {\n    fetchImages();\n  }, []);\n\n  const fetchImages = async () => {\n    try {\n      const res = await axios.get('/api/images');\n      setImages(res.data);\n    } catch (error) {\n      console.error('Error fetching images:', error);\n    }\n  };\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('image', file);\n\n    try {\n      await axios.post('/api/images', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      fetchImages();\n    } catch (error) {\n      console.error('Error uploading image:', error);\n    }\n  };\n\n  const handleDelete = async (imageId) => {\n    try {\n      await axios.delete(`/api/images/${imageId}`);\n      fetchImages();\n    } catch (error) {\n      console.error('Error deleting image:', error);\n    }\n  };\n\n  return (\n    <Container \n      maxWidth=\"lg\" \n      sx={{ \n        mt: isMobile ? 2 : 4,\n        mb: isMobile ? 8 : 4,\n        px: isMobile ? 1 : 3\n      }}\n    >\n      {!isMobile && (\n        <Box sx={{ mb: 4, display: 'flex', justifyContent: 'center' }}>\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            size=\"large\"\n            startIcon={<AddIcon />}\n          >\n            Upload Image\n            <input\n              type=\"file\"\n              hidden\n              accept=\"image/*\"\n              onChange={handleFileUpload}\n            />\n          </Button>\n        </Box>\n      )}\n\n      <Grid container spacing={isMobile ? 1 : 3}>\n        {images.map((image) => (\n          <Grid item xs={6} sm={4} md={3} key={image._id}>\n            <Card \n              sx={{ \n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                borderRadius: isMobile ? 2 : 1,\n                '&:hover': {\n                  transform: 'translateY(-2px)',\n                  transition: 'transform 0.2s ease-in-out',\n                  boxShadow: 3\n                }\n              }}\n            >\n              <CardMedia\n                component=\"img\"\n                height={isMobile ? \"140\" : \"200\"}\n                image={getFileUrl(`/uploads/${image.filename}`)}\n                alt={image.originalName}\n                onClick={() => setSelectedImage(image)}\n                sx={{ \n                  cursor: 'pointer',\n                  objectFit: 'cover'\n                }}\n              />\n              <CardContent sx={{ flexGrow: 1, p: isMobile ? 1 : 2 }}>\n                <Typography \n                  variant=\"body2\" \n                  color=\"text.secondary\"\n                  sx={{ \n                    fontSize: isMobile ? '0.75rem' : '0.875rem',\n                    mb: 1\n                  }}\n                >\n                  Uploaded by: {image.uploadedBy.username}\n                </Typography>\n                {user._id === image.uploadedBy._id && (\n                  <IconButton\n                    onClick={() => handleDelete(image._id)}\n                    size={isMobile ? \"small\" : \"medium\"}\n                    sx={{ \n                      float: 'right',\n                      color: 'error.main',\n                      '&:hover': {\n                        bgcolor: 'error.light'\n                      }\n                    }}\n                  >\n                    <DeleteIcon />\n                  </IconButton>\n                )}\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {/* Mobile Floating Action Button */}\n      {isMobile && (\n        <Fab\n          color=\"primary\"\n          aria-label=\"upload image\"\n          component=\"label\"\n          sx={{\n            position: 'fixed',\n            bottom: 16,\n            right: 16,\n            zIndex: 1000\n          }}\n        >\n          <input\n            type=\"file\"\n            hidden\n            accept=\"image/*\"\n            onChange={handleFileUpload}\n          />\n          <AddIcon />\n        </Fab>\n      )}\n\n      <Dialog\n        open={Boolean(selectedImage)}\n        onClose={() => setSelectedImage(null)}\n        maxWidth=\"md\"\n        fullWidth\n        fullScreen={isMobile}\n      >\n        {selectedImage && (\n          <>\n            <DialogTitle>\n              {selectedImage.originalName}\n            </DialogTitle>\n            <DialogContent>\n              <img\n                src={getFileUrl(`/uploads/${selectedImage.filename}`)}\n                alt={selectedImage.originalName}\n                style={{ \n                  width: '100%', \n                  height: 'auto',\n                  borderRadius: isMobile ? 0 : 4\n                }}\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button \n                onClick={() => setSelectedImage(null)}\n                size={isMobile ? \"large\" : \"medium\"}\n              >\n                Close\n              </Button>\n            </DialogActions>\n          </>\n        )}\n      </Dialog>\n    </Container>\n  );\n};\n\nexport default Home; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}