{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Snackbar,Alert,Button,Box}from'@mui/material';import GetAppIcon from'@mui/icons-material/GetApp';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PWAInstallPrompt=()=>{const[showInstallPrompt,setShowInstallPrompt]=useState(false);const[deferredPrompt,setDeferredPrompt]=useState(null);useEffect(()=>{const handler=e=>{// Prevent Chrome 67 and earlier from automatically showing the prompt\ne.preventDefault();// Stash the event so it can be triggered later\nsetDeferredPrompt(e);// Show the install prompt\nsetShowInstallPrompt(true);};window.addEventListener('beforeinstallprompt',handler);return()=>{window.removeEventListener('beforeinstallprompt',handler);};},[]);const handleInstall=async()=>{if(!deferredPrompt)return;// Show the install prompt\ndeferredPrompt.prompt();// Wait for the user to respond to the prompt\nconst{outcome}=await deferredPrompt.userChoice;if(outcome==='accepted'){console.log('User accepted the install prompt');}else{console.log('User dismissed the install prompt');}// Clear the deferredPrompt\nsetDeferredPrompt(null);setShowInstallPrompt(false);};const handleClose=()=>{setShowInstallPrompt(false);};return/*#__PURE__*/_jsx(Snackbar,{open:showInstallPrompt,autoHideDuration:10000,onClose:handleClose,anchorOrigin:{vertical:'bottom',horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:handleClose,severity:\"info\",sx:{width:'100%'},action:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Button,{color:\"inherit\",size:\"small\",onClick:handleInstall,startIcon:/*#__PURE__*/_jsx(GetAppIcon,{}),children:\"Install\"}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",size:\"small\",onClick:handleClose,children:\"Later\"})]}),children:\"Install Global Chat as an app for a better experience!\"})});};export default PWAInstallPrompt;","map":{"version":3,"names":["React","useState","useEffect","Snackbar","Alert","Button","Box","GetAppIcon","jsx","_jsx","jsxs","_jsxs","PWAInstallPrompt","showInstallPrompt","setShowInstallPrompt","deferredPrompt","setDeferredPrompt","handler","e","preventDefault","window","addEventListener","removeEventListener","handleInstall","prompt","outcome","userChoice","console","log","handleClose","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","children","severity","sx","width","action","display","gap","color","size","onClick","startIcon"],"sources":["/Users/lukasygina/image-share-app-1/client/src/components/PWAInstallPrompt.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Snackbar, \n  Alert, \n  Button, \n  Box \n} from '@mui/material';\nimport GetAppIcon from '@mui/icons-material/GetApp';\n\nconst PWAInstallPrompt = () => {\n  const [showInstallPrompt, setShowInstallPrompt] = useState(false);\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\n\n  useEffect(() => {\n    const handler = (e) => {\n      // Prevent Chrome 67 and earlier from automatically showing the prompt\n      e.preventDefault();\n      // Stash the event so it can be triggered later\n      setDeferredPrompt(e);\n      // Show the install prompt\n      setShowInstallPrompt(true);\n    };\n\n    window.addEventListener('beforeinstallprompt', handler);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handler);\n    };\n  }, []);\n\n  const handleInstall = async () => {\n    if (!deferredPrompt) return;\n\n    // Show the install prompt\n    deferredPrompt.prompt();\n\n    // Wait for the user to respond to the prompt\n    const { outcome } = await deferredPrompt.userChoice;\n\n    if (outcome === 'accepted') {\n      console.log('User accepted the install prompt');\n    } else {\n      console.log('User dismissed the install prompt');\n    }\n\n    // Clear the deferredPrompt\n    setDeferredPrompt(null);\n    setShowInstallPrompt(false);\n  };\n\n  const handleClose = () => {\n    setShowInstallPrompt(false);\n  };\n\n  return (\n    <Snackbar\n      open={showInstallPrompt}\n      autoHideDuration={10000}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n    >\n      <Alert \n        onClose={handleClose} \n        severity=\"info\" \n        sx={{ width: '100%' }}\n        action={\n          <Box sx={{ display: 'flex', gap: 1 }}>\n            <Button \n              color=\"inherit\" \n              size=\"small\" \n              onClick={handleInstall}\n              startIcon={<GetAppIcon />}\n            >\n              Install\n            </Button>\n            <Button \n              color=\"inherit\" \n              size=\"small\" \n              onClick={handleClose}\n            >\n              Later\n            </Button>\n          </Box>\n        }\n      >\n        Install Global Chat as an app for a better experience!\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default PWAInstallPrompt; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OACEC,QAAQ,CACRC,KAAK,CACLC,MAAM,CACNC,GAAG,KACE,eAAe,CACtB,MAAO,CAAAC,UAAU,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAACC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAACc,cAAc,CAAEC,iBAAiB,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE1DC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,OAAO,CAAIC,CAAC,EAAK,CACrB;AACAA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB;AACAH,iBAAiB,CAACE,CAAC,CAAC,CACpB;AACAJ,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAEDM,MAAM,CAACC,gBAAgB,CAAC,qBAAqB,CAAEJ,OAAO,CAAC,CAEvD,MAAO,IAAM,CACXG,MAAM,CAACE,mBAAmB,CAAC,qBAAqB,CAAEL,OAAO,CAAC,CAC5D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAM,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAACR,cAAc,CAAE,OAErB;AACAA,cAAc,CAACS,MAAM,CAAC,CAAC,CAEvB;AACA,KAAM,CAAEC,OAAQ,CAAC,CAAG,KAAM,CAAAV,cAAc,CAACW,UAAU,CAEnD,GAAID,OAAO,GAAK,UAAU,CAAE,CAC1BE,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC,CACjD,CAAC,IAAM,CACLD,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAClD,CAEA;AACAZ,iBAAiB,CAAC,IAAI,CAAC,CACvBF,oBAAoB,CAAC,KAAK,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAe,WAAW,CAAGA,CAAA,GAAM,CACxBf,oBAAoB,CAAC,KAAK,CAAC,CAC7B,CAAC,CAED,mBACEL,IAAA,CAACN,QAAQ,EACP2B,IAAI,CAAEjB,iBAAkB,CACxBkB,gBAAgB,CAAE,KAAM,CACxBC,OAAO,CAAEH,WAAY,CACrBI,YAAY,CAAE,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAC,QAAA,cAE3D3B,IAAA,CAACL,KAAK,EACJ4B,OAAO,CAAEH,WAAY,CACrBQ,QAAQ,CAAC,MAAM,CACfC,EAAE,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CACtBC,MAAM,cACJ7B,KAAA,CAACL,GAAG,EAACgC,EAAE,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,CAAE,CAAE,CAAAN,QAAA,eACnC3B,IAAA,CAACJ,MAAM,EACLsC,KAAK,CAAC,SAAS,CACfC,IAAI,CAAC,OAAO,CACZC,OAAO,CAAEtB,aAAc,CACvBuB,SAAS,cAAErC,IAAA,CAACF,UAAU,GAAE,CAAE,CAAA6B,QAAA,CAC3B,SAED,CAAQ,CAAC,cACT3B,IAAA,CAACJ,MAAM,EACLsC,KAAK,CAAC,SAAS,CACfC,IAAI,CAAC,OAAO,CACZC,OAAO,CAAEhB,WAAY,CAAAO,QAAA,CACtB,OAED,CAAQ,CAAC,EACN,CACN,CAAAA,QAAA,CACF,wDAED,CAAO,CAAC,CACA,CAAC,CAEf,CAAC,CAED,cAAe,CAAAxB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}