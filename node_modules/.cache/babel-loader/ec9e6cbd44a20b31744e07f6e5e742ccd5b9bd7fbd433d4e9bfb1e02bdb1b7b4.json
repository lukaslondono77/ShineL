{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{IconButton,Box,Typography,LinearProgress,Button,Alert,useTheme,useMediaQuery}from'@mui/material';import{Mic as MicIcon,Stop as StopIcon,PlayArrow as PlayIcon,Delete as DeleteIcon,Send as SendIcon}from'@mui/icons-material';import API_URL from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AudioRecorder=_ref=>{let{onSendAudio,disabled=false}=_ref;const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('md'));const[isRecording,setIsRecording]=useState(false);const[isPlaying,setIsPlaying]=useState(false);const[audioBlob,setAudioBlob]=useState(null);const[audioUrl,setAudioUrl]=useState(null);const[duration,setDuration]=useState(0);const[currentTime,setCurrentTime]=useState(0);const[error,setError]=useState(null);const[isUploading,setIsUploading]=useState(false);const mediaRecorderRef=useRef(null);const audioChunksRef=useRef([]);const audioRef=useRef(null);const startTimeRef=useRef(null);const intervalRef=useRef(null);useEffect(()=>{return()=>{if(audioUrl){URL.revokeObjectURL(audioUrl);}if(intervalRef.current){clearInterval(intervalRef.current);}};},[audioUrl]);const startRecording=async()=>{try{setError(null);const stream=await navigator.mediaDevices.getUserMedia({audio:true});mediaRecorderRef.current=new MediaRecorder(stream);audioChunksRef.current=[];mediaRecorderRef.current.ondataavailable=event=>{audioChunksRef.current.push(event.data);};mediaRecorderRef.current.onstop=()=>{const blob=new Blob(audioChunksRef.current,{type:'audio/wav'});const url=URL.createObjectURL(blob);setAudioBlob(blob);setAudioUrl(url);// Stop all tracks\nstream.getTracks().forEach(track=>track.stop());};mediaRecorderRef.current.start();setIsRecording(true);startTimeRef.current=Date.now();// Update duration every 100ms\nintervalRef.current=setInterval(()=>{setDuration((Date.now()-startTimeRef.current)/1000);},100);}catch(error){console.error('Error starting recording:',error);setError('No se pudo acceder al micrófono. Verifica los permisos.');}};const stopRecording=()=>{if(mediaRecorderRef.current&&isRecording){mediaRecorderRef.current.stop();setIsRecording(false);if(intervalRef.current){clearInterval(intervalRef.current);}}};const playAudio=()=>{if(audioRef.current){audioRef.current.play();setIsPlaying(true);}};const pauseAudio=()=>{if(audioRef.current){audioRef.current.pause();setIsPlaying(false);}};const deleteRecording=()=>{if(audioUrl){URL.revokeObjectURL(audioUrl);}setAudioBlob(null);setAudioUrl(null);setDuration(0);setCurrentTime(0);setIsPlaying(false);};const sendAudio=async()=>{if(!audioBlob)return;setIsUploading(true);setError(null);try{const formData=new FormData();formData.append('audio',audioBlob,'recording.wav');const token=localStorage.getItem('token');if(!token){throw new Error('No authentication token found');}console.log('Uploading audio to:',\"\".concat(API_URL,\"/api/audio/upload\"));const response=await fetch(\"\".concat(API_URL,\"/api/audio/upload\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)},body:formData});console.log('Upload response status:',response.status);if(!response.ok){const errorText=await response.text();console.error('Upload error response:',errorText);throw new Error(\"Error uploading audio: \".concat(response.status,\" \").concat(response.statusText));}const data=await response.json();console.log('Upload successful:',data);// Send audio message\nawait onSendAudio(data.audioUrl,Math.round(duration));// Clean up\ndeleteRecording();}catch(error){console.error('Error sending audio:',error);setError(\"Error al enviar el audio: \".concat(error.message));}finally{setIsUploading(false);}};const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=Math.floor(seconds%60);return\"\".concat(mins,\":\").concat(secs.toString().padStart(2,'0'));};const handleTimeUpdate=()=>{if(audioRef.current){setCurrentTime(audioRef.current.currentTime);}};const handleAudioEnded=()=>{setIsPlaying(false);setCurrentTime(0);};if(error){return/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error});}return/*#__PURE__*/_jsxs(Box,{sx:{width:'100%'},children:[!audioBlob?/*#__PURE__*/// Recording interface\n_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(IconButton,{color:isRecording?'error':'primary',onClick:isRecording?stopRecording:startRecording,disabled:disabled,sx:{bgcolor:isRecording?'error.main':'primary.main',color:'white','&:hover':{bgcolor:isRecording?'error.dark':'primary.dark'},width:isMobile?48:40,height:isMobile?48:40},children:isRecording?/*#__PURE__*/_jsx(StopIcon,{}):/*#__PURE__*/_jsx(MicIcon,{})}),isRecording&&/*#__PURE__*/_jsxs(Box,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Grabando... \",formatTime(duration)]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:duration/60*100// Max 60 seconds\n,sx:{mt:0.5}})]})]}):/*#__PURE__*/// Playback interface\n_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1,p:1,bgcolor:'background.paper',borderRadius:1},children:[/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:isPlaying?pauseAudio:playAudio,size:\"small\",children:isPlaying?/*#__PURE__*/_jsx(StopIcon,{}):/*#__PURE__*/_jsx(PlayIcon,{})}),/*#__PURE__*/_jsxs(Box,{sx:{flexGrow:1,mx:1},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[formatTime(currentTime),\" / \",formatTime(duration)]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:currentTime/duration*100,sx:{mt:0.5}})]}),/*#__PURE__*/_jsx(IconButton,{color:\"error\",onClick:deleteRecording,size:\"small\",disabled:isUploading,children:/*#__PURE__*/_jsx(DeleteIcon,{})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"small\",onClick:sendAudio,disabled:disabled||isUploading,startIcon:/*#__PURE__*/_jsx(SendIcon,{}),children:isUploading?'Enviando...':'Enviar'})]}),audioUrl&&/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:audioUrl,onTimeUpdate:handleTimeUpdate,onEnded:handleAudioEnded,style:{display:'none'}})]});};export default AudioRecorder;","map":{"version":3,"names":["React","useState","useRef","useEffect","IconButton","Box","Typography","LinearProgress","Button","Alert","useTheme","useMediaQuery","Mic","MicIcon","Stop","StopIcon","PlayArrow","PlayIcon","Delete","DeleteIcon","Send","SendIcon","API_URL","jsx","_jsx","jsxs","_jsxs","AudioRecorder","_ref","onSendAudio","disabled","theme","isMobile","breakpoints","down","isRecording","setIsRecording","isPlaying","setIsPlaying","audioBlob","setAudioBlob","audioUrl","setAudioUrl","duration","setDuration","currentTime","setCurrentTime","error","setError","isUploading","setIsUploading","mediaRecorderRef","audioChunksRef","audioRef","startTimeRef","intervalRef","URL","revokeObjectURL","current","clearInterval","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","MediaRecorder","ondataavailable","event","push","data","onstop","blob","Blob","type","url","createObjectURL","getTracks","forEach","track","stop","start","Date","now","setInterval","console","stopRecording","playAudio","play","pauseAudio","pause","deleteRecording","sendAudio","formData","FormData","append","token","localStorage","getItem","Error","log","concat","response","fetch","method","headers","body","status","ok","errorText","text","statusText","json","Math","round","message","formatTime","seconds","mins","floor","secs","toString","padStart","handleTimeUpdate","handleAudioEnded","severity","sx","mb","children","width","display","alignItems","gap","color","onClick","bgcolor","height","flexGrow","variant","value","mt","p","borderRadius","size","mx","startIcon","ref","src","onTimeUpdate","onEnded","style"],"sources":["/Users/lukasygina/image-share-app-1/client/src/components/AudioRecorder.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport {\n  IconButton,\n  Box,\n  Typography,\n  LinearProgress,\n  Button,\n  Alert,\n  useTheme,\n  useMediaQuery\n} from '@mui/material';\nimport {\n  Mic as MicIcon,\n  Stop as StopIcon,\n  PlayArrow as PlayIcon,\n  Delete as DeleteIcon,\n  Send as SendIcon\n} from '@mui/icons-material';\nimport API_URL from '../utils/api';\n\nconst AudioRecorder = ({ onSendAudio, disabled = false }) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  \n  const [isRecording, setIsRecording] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [audioUrl, setAudioUrl] = useState(null);\n  const [duration, setDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [error, setError] = useState(null);\n  const [isUploading, setIsUploading] = useState(false);\n  \n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const audioRef = useRef(null);\n  const startTimeRef = useRef(null);\n  const intervalRef = useRef(null);\n\n  useEffect(() => {\n    return () => {\n      if (audioUrl) {\n        URL.revokeObjectURL(audioUrl);\n      }\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [audioUrl]);\n\n  const startRecording = async () => {\n    try {\n      setError(null);\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      \n      mediaRecorderRef.current = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n      \n      mediaRecorderRef.current.ondataavailable = (event) => {\n        audioChunksRef.current.push(event.data);\n      };\n      \n      mediaRecorderRef.current.onstop = () => {\n        const blob = new Blob(audioChunksRef.current, { type: 'audio/wav' });\n        const url = URL.createObjectURL(blob);\n        setAudioBlob(blob);\n        setAudioUrl(url);\n        \n        // Stop all tracks\n        stream.getTracks().forEach(track => track.stop());\n      };\n      \n      mediaRecorderRef.current.start();\n      setIsRecording(true);\n      startTimeRef.current = Date.now();\n      \n      // Update duration every 100ms\n      intervalRef.current = setInterval(() => {\n        setDuration((Date.now() - startTimeRef.current) / 1000);\n      }, 100);\n      \n    } catch (error) {\n      console.error('Error starting recording:', error);\n      setError('No se pudo acceder al micrófono. Verifica los permisos.');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    }\n  };\n\n  const playAudio = () => {\n    if (audioRef.current) {\n      audioRef.current.play();\n      setIsPlaying(true);\n    }\n  };\n\n  const pauseAudio = () => {\n    if (audioRef.current) {\n      audioRef.current.pause();\n      setIsPlaying(false);\n    }\n  };\n\n  const deleteRecording = () => {\n    if (audioUrl) {\n      URL.revokeObjectURL(audioUrl);\n    }\n    setAudioBlob(null);\n    setAudioUrl(null);\n    setDuration(0);\n    setCurrentTime(0);\n    setIsPlaying(false);\n  };\n\n  const sendAudio = async () => {\n    if (!audioBlob) return;\n    \n    setIsUploading(true);\n    setError(null);\n    \n    try {\n      const formData = new FormData();\n      formData.append('audio', audioBlob, 'recording.wav');\n      \n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n      \n      console.log('Uploading audio to:', `${API_URL}/api/audio/upload`);\n      \n      const response = await fetch(`${API_URL}/api/audio/upload`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      console.log('Upload response status:', response.status);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Upload error response:', errorText);\n        throw new Error(`Error uploading audio: ${response.status} ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      console.log('Upload successful:', data);\n      \n      // Send audio message\n      await onSendAudio(data.audioUrl, Math.round(duration));\n      \n      // Clean up\n      deleteRecording();\n      \n    } catch (error) {\n      console.error('Error sending audio:', error);\n      setError(`Error al enviar el audio: ${error.message}`);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const handleTimeUpdate = () => {\n    if (audioRef.current) {\n      setCurrentTime(audioRef.current.currentTime);\n    }\n  };\n\n  const handleAudioEnded = () => {\n    setIsPlaying(false);\n    setCurrentTime(0);\n  };\n\n  if (error) {\n    return (\n      <Alert severity=\"error\" sx={{ mb: 2 }}>\n        {error}\n      </Alert>\n    );\n  }\n\n  return (\n    <Box sx={{ width: '100%' }}>\n      {!audioBlob ? (\n        // Recording interface\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <IconButton\n            color={isRecording ? 'error' : 'primary'}\n            onClick={isRecording ? stopRecording : startRecording}\n            disabled={disabled}\n            sx={{\n              bgcolor: isRecording ? 'error.main' : 'primary.main',\n              color: 'white',\n              '&:hover': {\n                bgcolor: isRecording ? 'error.dark' : 'primary.dark',\n              },\n              width: isMobile ? 48 : 40,\n              height: isMobile ? 48 : 40,\n            }}\n          >\n            {isRecording ? <StopIcon /> : <MicIcon />}\n          </IconButton>\n          \n          {isRecording && (\n            <Box sx={{ flexGrow: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Grabando... {formatTime(duration)}\n              </Typography>\n              <LinearProgress \n                variant=\"determinate\" \n                value={(duration / 60) * 100} // Max 60 seconds\n                sx={{ mt: 0.5 }}\n              />\n            </Box>\n          )}\n        </Box>\n      ) : (\n        // Playback interface\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, p: 1, bgcolor: 'background.paper', borderRadius: 1 }}>\n          <IconButton\n            color=\"primary\"\n            onClick={isPlaying ? pauseAudio : playAudio}\n            size=\"small\"\n          >\n            {isPlaying ? <StopIcon /> : <PlayIcon />}\n          </IconButton>\n          \n          <Box sx={{ flexGrow: 1, mx: 1 }}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              {formatTime(currentTime)} / {formatTime(duration)}\n            </Typography>\n            <LinearProgress \n              variant=\"determinate\" \n              value={(currentTime / duration) * 100}\n              sx={{ mt: 0.5 }}\n            />\n          </Box>\n          \n          <IconButton\n            color=\"error\"\n            onClick={deleteRecording}\n            size=\"small\"\n            disabled={isUploading}\n          >\n            <DeleteIcon />\n          </IconButton>\n          \n          <Button\n            variant=\"contained\"\n            size=\"small\"\n            onClick={sendAudio}\n            disabled={disabled || isUploading}\n            startIcon={<SendIcon />}\n          >\n            {isUploading ? 'Enviando...' : 'Enviar'}\n          </Button>\n        </Box>\n      )}\n      \n      {audioUrl && (\n        <audio\n          ref={audioRef}\n          src={audioUrl}\n          onTimeUpdate={handleTimeUpdate}\n          onEnded={handleAudioEnded}\n          style={{ display: 'none' }}\n        />\n      )}\n    </Box>\n  );\n};\n\nexport default AudioRecorder; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}